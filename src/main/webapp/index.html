<!DOCTYPE html>
<html>
  <head>
    <title>LBU BB Tasks</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style type="text/css">
      body, p, h1, h2 { font-family: sans-serif; }
      td { padding: 0.5em 0.5em 0.5em 0.5em; background-color: rgb(200,200,200); vertical-align: top; }
    </style>
    <script>
      function arrangeTaskForms()
      {
        var sel = document.getElementById( "taskselect" );
        var list = document.getElementById( "tasklist" );
        var divs = list.getElementsByTagName( "div" );
        var i;
        for ( i=0; i<divs.length; i++ )
        {
          var div = divs[i];
          div.style.display = div.id == sel.value ? "block" : "none";
        }
      }
    </script>
  </head>
  <body>
    <h1>LBU BB Tasks</h1>
    <p>This is a custom building block created in-house at Leeds Beckett 
      University by Jon Maber. It has multiple functions relating to the 
      management of files stored on the Blackboard Server. </p>
    <ul>
      <li><a href="status?setup=true">Configure this building block.</a></li>
      <li><a href="status">Technical status.</a></li>
      <li><a href="status?tasklist=true">List of running tasks.</a></li>
    </ul>

    <h2>Start a Background Task</h2>
    <table><tr><td>
    <p>Select from the list</p>
    <form>
      <select id="taskselect" onchange="arrangeTaskForms();" size="20">
        <option value="customemail">Send Custom Emails</option>
        <option value="analysis">Legacy File System - Analyse in Buckets</option>
        <option value="turnitin">Legacy File System - Analyse Turnitin Direct Usage</option>
        <option value="prune">Legacy File System - Prune Turnitin Direct Assignments</option>
        <option value="listdeletedfiles">Xythos - List Deleted Files</option>
        <option value="analyseautoarchives">Xythos - Analyse Auto-archives</option>
        <option value="analysedeletedautoarchives">Xythos - Analyse Deleted Auto-archives</option>
        <option value="archivehugecoursefilesanalysis">Xythos - Archive Huge Course Files - Analysis</option>
        <option value="archivehugecoursefilesarchiveblobs">Xythos - Archive Huge Course Files - Archive Blobs or Files</option>
        <!--
        <option value="archivehugecoursefilesstagetwo">Xythos - Archive Huge Course Files Move</option>
        -->
        <option value="analysevideofiles-clear">Xythos Video - Clear Metadata</option>
        <option value="analysevideofiles-analyse">Xythos Video - Create Metadata</option>
        <option value="analysevideofiles-list">Xythos Video - List Metadata</option>
        <option value="analysevideofiles-recompress">Xythos Video - Recompress files</option>
        <option value="demotask">Development Tools - Demo Task</option>
        <option value="peerservice">Development Tools - Peer Service Task</option>
        <option value="triggerautoarchive">Trigger Auto-Archives</option>
      </select>
    </form>
        </td><td>
    <div id="tasklist">
    <div id="customemail" style="display: none;">
      <h3>Send Custom Email Task</h3>
      <p>Before you run this task you need to upload a bulk email file.
      This task will process that file.</p>
      <form method="POST" action="email/">
        <p>I <input name="check" value="do not understand"/> what I'm doing.</p>
        <p>Boilerplate text in HTML</p>
        <textarea cols="100" rows="20" name="boilerplate"></textarea>
        <p><input type="submit" value="Send"/></p>
      </form>
    </div>
    
    <div id="analysis" style="display: none;">
      <h3>Legacy File System Analysis Task</h3>
      <h4>Analyse all in buckets</h4>
      <form method="POST" action="legacy/">
        <input type="hidden" name="analysis" value="yes"/>
        <p>I <input name="check" value="do not understand"/> what I'm doing.</p>
        <p><input type="submit" value="Analyse"/></p>
      </form>
    </div>
    
    <div id="turnitin" style="display: none;">
      <h3>Legacy File System Analysis Task</h3>
      <h4>Analyse Turnitin Usage</h4>
      <form method="POST" action="legacy/">
        <input type="hidden" name="turnitin" value="yes"/>
        <p>I <input name="check" value="do not understand"/> what I'm doing.</p>
        <p><input type="submit" value="Analyse"/></p>
      </form>
    </div>
    
    <div id="listdeletedfiles" style="display: none;">
      <h3>Xythos Task</h3>
      <h4>List Deleted Files</h4>
      <form method="POST" action="xythos/">
        <input type="hidden" name="listdeletedfiles" value="yes"/>
        <p>I <input name="check" value="do not understand"/> what I'm doing.</p>
        <p><input type="submit" value="List"/></p>
      </form>
    </div>

    <div id="prune" style="display: none;">
      <h3>Legacy File System Analysis Task</h3>
      <h4>Turn-it-in Direct File Pruning</h4>
      <form method="POST" action="legacy/">
        <input type="hidden" name="prune" value="yes"/>
        <p>I <input name="check" value="do not understand"/> what I'm doing.</p>
        <p><input type="submit" value="Prune"/></p>
      </form>
    </div>
      
    <div id="analyseautoarchives" style="display: none;">
      <h3>Xythos Task</h3>
      <h4>Analyse Auto-archives</h4>
      <form method="POST" action="xythos/">
        <input type="hidden" name="analyseautoarchives" value="yes"/>
        <p>I <input name="check" value="do not understand"/> what I'm doing.</p>
        <h5>After 00:00 on this date:</h5>
        <p>Year:<input name="year"/></p>
        <p>Month:<input name="month"/></p>
        <p>Date:<input name="date"/></p>
        <h5>Before 24:00 on this date:</h5>
        <p>Year:<input name="year2"/></p>
        <p>Month:<input name="month2"/></p>
        <p>Date:<input name="date2"/></p>
        <p><input type="submit" value="Analyse"/></p>
      </form>
    </div>
      
    <div id="analysedeletedautoarchives" style="display: none;">
      <h3>Xythos Task</h3>
      <h4>Analyse Deleted Auto-archives</h4>
      <form method="POST" action="xythos/">
        <input type="hidden" name="analysedeletedautoarchives" value="yes"/>
        <p>I <input name="check" value="do not understand"/> what I'm doing.</p>
        <h5>After 00:00 on this date:</h5>
        <p>Year:<input name="year"/></p>
        <p>Month:<input name="month"/></p>
        <p>Date:<input name="date"/></p>
        <h5>Before 24:00 on this date:</h5>
        <p>Year:<input name="year2"/></p>
        <p>Month:<input name="month2"/></p>
        <p>Date:<input name="date2"/></p>
        <p><input type="submit" value="Analyse"/></p>
      </form>
    </div>
      
    <div id="analysevideofiles-clear" style="display: none;">
      <h3>Xythos Video Task</h3>
      <h4>Clear Video Metadata</h4>
      <form method="POST" action="xythos/">
        <input type="hidden" name="analysevideofiles" value="yes"/>
        <input type="hidden" name="action" value="clear"/>
        <p>I <input name="check" value="do not understand"/> what I'm doing.</p>
        <p><input type="checkbox" name="reset"/> Remove property definitions too.</p>
        <p>File path filter (regular expression):<input name="regex" value="/courses/.*"/></p>
        <p><input type="submit" value="Clear"/></p>
      </form>
    </div>
      
    <div id="archivehugecoursefilesarchiveblobs" style="display: none;">
      <h3>Xythos File Task</h3>
      <h4>Archive Huge Course Files - Archive Blobs or Files</h4>
      <form method="POST" action="xythos/">
        <input type="hidden" name="archivehugecoursefilesarchiveblobs" value="yes"/>
        <p>I <input name="check" value="do not understand"/> what I'm doing.</p>
        <p>
          <select name="method">
            <option value="remove" selected="selected">Remove</option>
            <option value="replace">Replace</option>
          </select>
        </p>
        <p>Paste list of blob IDs here: <textarea name="blobidlist" cols="80" rows="20"></textarea></p>
        <p><input type="submit" value="Process"/></p>
      </form>
    </div>
      
    <div id="archivehugecoursefilesstagetwo" style="display: none;">
      <h3>Xythos File Task</h3>
      <h4>Archive Huge Course Files - Stage Two</h4>
      <form method="POST" action="xythos/">
        <input type="hidden" name="archivehugecoursefilesstagetwo" value="yes"/>
        <p>I <input name="check" value="do not understand"/> what I'm doing.</p>
        <p>Paste list of blob IDs here: <textarea name="blobidlist" cols="80" rows="20"></textarea></p>
        <p><input type="submit" value="Process"/></p>
      </form>
    </div>
      
    <div id="archivehugecoursefilesanalysis" style="display: none;">
      <h3>Xythos File Task</h3>
      <h4>Archive Huge Course Files - Analysis</h4>
      <form method="POST" action="xythos/">
        <input type="hidden" name="archivehugecoursefilesanalysis" value="yes"/>
        <p>I <input name="check" value="do not understand"/> what I'm doing.</p>
        <p>Accessed before date for link deletion list (optional):</p>
        <p>Day:<input name="day" value=""/> Month:<input name="month" value=""/>Year:<input name="year" value=""/></p>
        <p><input type="submit" value="Analyse"/></p>
      </form>
    </div>
      
    <div id="analysevideofiles-analyse" style="display: none;">
      <h3>Xythos Video Task</h3>
      <h4>Analyse Video Metadata</h4>
      <form method="POST" action="xythos/">
        <input type="hidden" name="analysevideofiles" value="yes"/>
        <input type="hidden" name="action" value="analyse"/>
        <p>I <input name="check" value="do not understand"/> what I'm doing.</p>
        <p>File path filter (regular expression):<input name="regex" value="/courses/.*"/></p>
        <p><input type="submit" value="Analyse"/></p>
      </form>
    </div>
      
    <div id="analysevideofiles-list" style="display: none;">
      <h3>Xythos Video Task</h3>
      <h4>List Video Metadata</h4>
      <form method="POST" action="xythos/">
        <input type="hidden" name="analysevideofiles" value="yes"/>
        <input type="hidden" name="action" value="list"/>
        <p>I <input name="check" value="do not understand"/> what I'm doing.</p>
        <p>File path filter (regular expression):<input name="regex" value="/courses/.*"/></p>
        <p><input type="submit" value="Clear"/></p>
      </form>
    </div>
      
      
    <div id="analysevideofiles-recompress" style="display: none;">
      <h3>Xythos Video Task</h3>
      <h4>Recompress Video Files</h4>
      <form method="POST" action="xythos/">
        <input type="hidden" name="analysevideofiles" value="yes"/>
        <input type="hidden" name="action" value="recompress"/>
        <p>I <input name="check" value="do not understand"/> what I'm doing.</p>
        <p>File path filter (regular expression):<input name="regex" value="/courses/12060-1810/.*"/></p>
        <p><input type="submit" value="Recompress"/></p>
      </form>
    </div>
      
      
    <div id="demotask" style="display: none;">
      <h3>Development Task</h3>
      <h4>Demo Task</h4>
      <form method="POST" action="legacy/">
        <input type="hidden" name="demotask" value="yes"/>
        <p>I <input name="check" value="do not understand"/> what I'm doing.</p>
        <p><input type="submit" value="Demo"/></p>
      </form>
    </div>

    <div id="peerservice" style="display: none;">
      <h3>Development Task</h3>
      <h4>Peer Service List</h4>
      <form method="POST" action="legacy/">
        <input type="hidden" name="peerservice" value="yes"/>
        <p>I <input name="check" value="do not understand"/> what I'm doing.</p>
        <p><input type="submit" value="List"/></p>
      </form>
    </div>

    <div id="triggerautoarchive" style="display: none;">
      <h3>Quicky Task</h3>
      <h4>Trigger Auto-Archives for Course IDs</h4>
      <form method="POST" action="quicky/">
        <input type="hidden" name="triggerautoarchive" value="yes"/>
        <p>I <input name="check" value="do not understand"/> what I'm doing.</p>
        <textarea cols="100" rows="20" name="courseids"></textarea>
        <p><input type="submit" value="Run Now"/></p>
      </form>
    </div>

    </div>
        </td></tr></table>
<!--    
    <h4>Amazonaws S3</h4>
    <form method="POST" action="xythos/">
      <input type="hidden" name="s3" value="yes"/>
      <p>I <input name="check" value="do not understand"/> what I'm doing.</p>
      <p><input type="submit" value="S3"/></p>
    </form>

    <h4>Autoarchive Test</h4>
    <form method="POST" action="xythos/">
      <input type="hidden" name="aatest" value="yes"/>
      <p>I <input name="check" value="do not understand"/> what I'm doing.</p>
      <p>Path <input name="path" value="/internal/autoArchive/13219-2010_20200420/13219-2010__141606_1_MARK406 - Understanding Markets & Cust. - 13219 - TBA - 202010_1619917378775.zip"/></p>
      <p><input type="submit" value="AATest"/></p>
    </form>

    <h4>Video Experiment</h4>
    <form method="GET" action="execute/">
      <input type="hidden" name="execute" value="yes"/>
      <p>I really, really <input name="check" value="do not understand"/> what I'm doing.</p>
      <p><input type="submit" value="Execute"/></p>
    </form>
    <h4>Send a Test EMail to Jon</h4>
    <form method="POST" action="status">
      <input type="hidden" name="email" value="yes"/>
      <p><input type="submit" value="Send"/></p>
    </form>
-->

  </body>
</html>
